<div class="container">
	<div class="row">
		<% if flash[:notice] %>
			<div class="col-sm-12 notice-message">
				<%= flash[:notice] %>
			</div>
		<% elsif flash[:error] %>
			<div class="col-12 error-message">
				<i class="fa fa-exclamation-circle"></i><%= flash[:error] %>
			</div>
		<% end %>
		<h3 class="col-12">
			ユーザー詳細
			<% if @user.id != current_user.id %>
				<%= link_to new_users_user_report_path(@user) do %>
					<button class="btn btn-danger" style="float: right;"><i class="fa fa-bullhorn fa-lg" style="color: #fff;"></i></button>
				<% end %>
			<% end %>
		</h3>
		<div class="col-12 user-info">
			<div>
				<%= attachment_image_tag @user, :image, :fill, 100, 100, format: 'jpeg', class: "prof-img" %>
			</div>
			<div class="user-text">
				<h5>
					<i class="fa fa-user"></i> <%= @user.name %>
					<% if @user.id == current_user.id %>
						<i class="fa fa-ticket"></i> x <%= @user.ticket %>
						<%= link_to edit_users_user_path(@user) do %>
							<i class="fa fa-edit fa-lg"></i>
						<% end %>
					<% end %>
				</h5>
				<p><%= @user.introduction %></p>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12 col-lg-6">
			<table class="table table-bordered table-title">
				<thead>
					<tr>
						<th>依頼履歴</th>
					</tr>
				</thead>
			</table>
			<% @requests.each do |request| %>
				<div class="req-box col-12">
					<div class="req-img">
						<%= attachment_image_tag request, :image, :fill, 150, 100, format: 'jpg', fallback: "1560031.jpg", size: '130x100' %>
						<p>依頼者 : <%= link_to request.user.name, users_user_path(request.user), class: "link" %></p>
					</div>
					<div class="req-text">
						<p class="title">
							<% if DateTime.now <= request.datetime %>
								<span class="badge badge-success">進行中</span>
							<% else %>
								<span class="badge badge-danger">終了</span>
							<% end %>
							<%= link_to request.title, users_request_path(request), class: "link" %>
						</p>
						<p class="content"><%= request.content %></p>
						<p class="req-info"><%= request.created_at %><br>助っ人登録数 : <%= request.participants.count %>/<%= request.capacity %></p>
					</div>
				</div>
			<% end %>
			<%= paginate @requests %>
		</div>
		<div class="col-sm-12 col-lg-6">
			<table class="table table-bordered table-title">
				<thead>
					<tr>
						<th>助っ人履歴</th>
					</tr>
				</thead>
			</table>
			<% @participants.each do |participant| %>
				<div class="req-box col-12">
					<div class="req-img">
						<%= attachment_image_tag participant.request, :image, :fill, 150, 100, format: 'jpg', fallback: "1560031.jpg", size: '130x100' %>
						<p>依頼者 : <%= link_to participant.request.user.name, users_user_path(participant.request.user), class: "link" %></p>
					</div>
					<div class="req-text">
						<p class="title">
							<% if DateTime.now <= participant.request.datetime %>
								<span class="badge badge-success">進行中</span>
							<% else %>
								<span class="badge badge-danger">終了</span>
							<% end %>
							<%= link_to participant.request.title, users_request_path(participant.request), class: "link" %>
						</p>
						<p class="content"><%= participant.request.content %></p>
						<p class="req-info"><%= participant.request.created_at %><br>助っ人登録数 : <%= participant.request.participants.count %>/<%= participant.request.capacity %></p>
					</div>
				</div>
			<% end %>
			<%= paginate @participants %>
		</div>
	</div>
</div>